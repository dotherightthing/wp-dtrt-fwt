// UI manipulation for DBTH child theme
/* globals jQuery, Waypoint, URI, WebFontConfig, dbth_config */

var wpdtrt_ui = {};

// JS Hint
/* globals jQuery, WebFontConfig */
/**
 * Theme JavaScript functions
 * Displays a list of posts in excerpt or full-length form.
 * Include wp_link_pages() to support navigation links within posts.
 *
 * @package DTRT Framework - Theme
 * @since 0.1.0
 * @version 0.1.0
 */

var wpdtrt_ui = {};

/**
 * Init UI
 */

wpdtrt_ui.init = function($) {

  document.addEventListener("touchstart", function() {
    // nada, this is just a hack to make :focus state render on touch
  }, false);

  wpdtrt_ui.webfontloader($);
  //wpdtrt_ui.get_source_title($);
  //wpdtrt_ui.editor($);
};

/**
 * Run scripts
 */

jQuery(document).ready( function($) {
  wpdtrt_ui.init($);
});

(function($) {
  $(window).on('load', function() {
    // defer these functions, to reduce initial load time for PageSpeed
  });
})(jQuery);


/**
 * WebFontLoader (Page Speed optimisation)
 * Load Google fonts asynchronously by using Googleâ€™s Web Font Loader.
 * Eliminates Render Blocking CSS above the fold (Mobile PS 69/100 -> 82/100).
 *
 * Using the Web Font Loader asynchronously avoids blocking your page while loading the JavaScript.
 * Be aware that if the script is used asynchronously, the rest of the page might render
 * before the Web Font Loader is loaded and executed, which can cause a Flash of Unstyled Text (FOUT).
 * https://github.com/typekit/webfontloader
 *
 * Source: https://www.keycdn.com/blog/google-pagespeed-insights-wordpress/
 * Choose fonts: https://fonts.google.com
 */

wpdtrt_ui.webfontloader = function($) {

  WebFontConfig = {
    google: {
      families: [
        "Open Sans:400,700"
      ]
    }
  };

  (function() {
    var wf = document.createElement("script");
    wf.src = "https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js";
    wf.type = "text/javascript";
    wf.async = "true";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(wf, s);
  })();

};
